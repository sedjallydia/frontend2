<div class="container">
  <h2>Manage Availability</h2>

  <!-- Display calendar -->
  <div *ngIf="events.length > 0">
    <h4>Your Current Availability</h4>
    <ul class="list-group">
      <li
        class="list-group-item"
        *ngFor="let event of events; let i = index"
      >
        {{ event.start | date: 'short' }} - {{ event.end | date: 'short' }}
        <button
          class="btn btn-danger btn-sm float-right"
          (click)="onDeleteAvailability(i)"
        >
          Delete
        </button>
        <button
          class="btn btn-warning btn-sm float-right mr-2"
          (click)="onModifyAvailability(event)"
        >
          Modify
        </button>
      </li>
    </ul>
  </div>

  <hr />

  <h4>Add Availability</h4>
  <form (ngSubmit)="onAddAvailability()">
    <div class="form-group">
      <label for="day">Day:</label>
      <input
        type="date"
        id="day"
        class="form-control"
        [(ngModel)]="newAvailability.day"
        name="day"
        required
      />
    </div>
    <div class="form-group">
      <label for="startTime">Start Time:</label>
      <input
        type="time"
        id="startTime"
        class="form-control"
        [(ngModel)]="newAvailability.startTime"
        name="startTime"
        required
      />
    </div>
    <div class="form-group">
      <label for="endTime">End Time:</label>
      <input
        type="time"
        id="endTime"
        class="form-control"
        [(ngModel)]="newAvailability.endTime"
        name="endTime"
        required
      />
    </div>
    <button type="submit" class="btn btn-primary">Add Availability</button>
  </form>

  <hr />

  <!-- Modify Availability Form -->
  <div *ngIf="selectedEvent">
    <h4>Modify Availability</h4>
    <form (ngSubmit)="onSaveModifiedAvailability()">
      <div class="form-group">
        <label for="day">Day:</label>
        <input
          type="date"
          id="day"
          class="form-control"
          [(ngModel)]="newAvailability.day"
          name="day"
          required
        />
      </div>
      <div class="form-group">
        <label for="startTime">Start Time:</label>
        <input
          type="time"
          id="startTime"
          class="form-control"
          [(ngModel)]="newAvailability.startTime"
          name="startTime"
          required
        />
      </div>
      <div class="form-group">
        <label for="endTime">End Time:</label>
        <input
          type="time"
          id="endTime"
          class="form-control"
          [(ngModel)]="newAvailability.endTime"
          name="endTime"
          required
        />
      </div>
      <button type="submit" class="btn btn-success">Save Changes</button>
    </form>
  </div>

  <p *ngIf="message" class="mt-3">{{ message }}</p>
</div>